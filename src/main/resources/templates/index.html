<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/plugin/layui/css/layui.css"  media="all">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>卡片面板</legend>
</fieldset>

<div style="padding: 20px; background-color: #F2F2F2;">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md6">
            <div class="layui-card">
                <div class="layui-card-header">卡片面板</div>
                <div class="layui-card-body">
                    <div id="report_1" style="height:400px;"></div>

                </div>
            </div>
        </div>
        <div class="layui-col-md6">
            <div class="layui-card">
                <div class="layui-card-header">卡片面板</div>
                <div class="layui-card-body">
                    <div id="report_2" style="height:400px;"></div>
                </div>
            </div>
        </div>
        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header">数据填报</div>
                <div class="layui-card-body">
                    <form class="layui-form" action="">

                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">编码</label>
                                <div class="layui-input-inline">
                                    <select name="modules" lay-verify="required" lay-search="">
                                        <option value="">请选择编码</option>
                                        <option value="601038">中国一拖</option>
                                        <option value="600127">金健米业</option>
                                    </select>
                                </div>
                            </div>

                            <div class="layui-inline">
                                <label class="layui-form-label">资金金额</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="username" lay-verify="required" lay-reqtext="用户名是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">价格</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="username" lay-verify="required" lay-reqtext="用户名是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                            </div>

                            <div class="layui-inline">
                                <label class="layui-form-label">日期</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="date" id="date" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                        </div>

                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <button type="submit" class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
                                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>常规折叠面板</legend>
</fieldset>
<div class="layui-collapse" lay-filter="test">
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">为什么JS社区大量采用未发布或者未广泛支持的语言特性？</h2>
        <div class="layui-colla-content">
            <p>有不少其他答案说是因为JS太差。我下面的答案已经说了，这不是根本性的原因。但除此之外，我还要纠正一些对JS具体问题的误解。JS当初是被作为脚本语言设计的，所以某些问题并不是JS设计得差或者是JS设计者的失误。比如var的作用域问题，并不是“错误”，而是当时绝大部分脚本语言都是这样的，如perl/php/sh等。模块的问题也是，脚本语言几乎都没有模块/命名空间功能。弱类型、for-in之类的问题也是，只不过现在用那些老的脚本语言的人比较少，所以很多人都误以为是JS才有的坑。另外有人说JS是半残语言，满足不了开发需求，1999年就该死。半残这个嘛，就夸张了。JS虽然有很多问题，但是设计总体还是优秀的。——来自知乎@贺师俊</p>
        </div>
    </div>
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">为什么前端工程师多不愿意用 Bootstrap 框架？</h2>
        <div class="layui-colla-content">
            <p>因为不适合。如果希望开发长期的项目或者制作产品类网站，那么就需要实现特定的设计，为了在维护项目中可以方便地按设计师要求快速修改样式，肯定会逐步编写出各种业务组件、工具类，相当于为项目自行开发一套框架。——来自知乎@Kayo</p>
        </div>
    </div>
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">layui 更适合哪些开发者？</h2>
        <div class="layui-colla-content">
            <p>在前端技术快速变革的今天，layui 仍然坚持语义化的组织模式，甚至于模块理念都是采用类AMD组织形式，并非是有意与时代背道而驰。layui 认为以jQuery为核心的开发方式还没有到完全消亡的时候，而早期市面上基于jQuery的UI都普通做得差强人意，所以需要有一个新的UI去重新为这一领域注入活力，并采用一些更科学的架构方式。
                <br><br>
                因此准确地说，layui 更多是面向那些追求开发简单的前端工程师们，以及所有层次的服务端程序员。</p>
        </div>
    </div>
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">贤心是男是女？</h2>
        <div class="layui-colla-content">
            <p>man！ 所以这个问题不要再出现了。。。</p>
        </div>
    </div>
</div>

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
    <legend>手风琴折叠</legend>
</fieldset>
<div class="layui-collapse" lay-accordion="">
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">layui 更适合哪些开发者？</h2>
        <div class="layui-colla-content layui-show">
            <p>在前端技术快速变革的今天，layui 仍然坚持语义化的组织模式，甚至于模块理念都是采用类AMD组织形式，并非是有意与时代背道而驰。layui 认为以jQuery为核心的开发方式还没有到完全消亡的时候，而早期市面上基于jQuery的UI都普通做得差强人意，所以需要有一个新的UI去重新为这一领域注入活力，并采用一些更科学的架构方式。
                <br>
                因此准确地说，layui 更多是面向那些追求开发简单的前端工程师们，以及所有层次的服务端程序员。</p>
        </div>
    </div>
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">为什么JS社区大量采用未发布或者未广泛支持的语言特性？</h2>
        <div class="layui-colla-content">
            <p>有不少其他答案说是因为JS太差。我下面的答案已经说了，这不是根本性的原因。但除此之外，我还要纠正一些对JS具体问题的误解。JS当初是被作为脚本语言设计的，所以某些问题并不是JS设计得差或者是JS设计者的失误。比如var的作用域问题，并不是“错误”，而是当时绝大部分脚本语言都是这样的，如perl/php/sh等。模块的问题也是，脚本语言几乎都没有模块/命名空间功能。弱类型、for-in之类的问题也是，只不过现在用那些老的脚本语言的人比较少，所以很多人都误以为是JS才有的坑。另外有人说JS是半残语言，满足不了开发需求，1999年就该死。半残这个嘛，就夸张了。JS虽然有很多问题，但是设计总体还是优秀的。——来自知乎@贺师俊</p>
        </div>
    </div>
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">为什么前端工程师多不愿意用 Bootstrap 框架？</h2>
        <div class="layui-colla-content">
            <p>因为不适合。如果希望开发长期的项目或者制作产品类网站，那么就需要实现特定的设计，为了在维护项目中可以方便地按设计师要求快速修改样式，肯定会逐步编写出各种业务组件、工具类，相当于为项目自行开发一套框架。——来自知乎@Kayo</p>
        </div>
    </div>
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">贤心是男是女？</h2>
        <div class="layui-colla-content">
            <p>man！ 所以这个问题不要再出现了。。。</p>
        </div>
    </div>
</div>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
    <legend>面板嵌套</legend>
</fieldset>
<div class="layui-collapse" lay-accordion="">
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">文豪</h2>
        <div class="layui-colla-content layui-show">

            <div class="layui-collapse" lay-accordion="">
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">唐代</h2>
                    <div class="layui-colla-content layui-show">

                        <div class="layui-collapse" lay-accordion="">
                            <div class="layui-colla-item">
                                <h2 class="layui-colla-title">杜甫</h2>
                                <div class="layui-colla-content layui-show">
                                    伟大的诗人
                                </div>
                            </div>
                            <div class="layui-colla-item">
                                <h2 class="layui-colla-title">李白</h2>
                                <div class="layui-colla-content">
                                    <p>据说是韩国人</p>
                                </div>
                            </div>
                            <div class="layui-colla-item">
                                <h2 class="layui-colla-title">王勃</h2>
                                <div class="layui-colla-content">
                                    <p>千古绝唱《滕王阁序》</p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">宋代</h2>
                    <div class="layui-colla-content">
                        <p>比如苏轼、李清照</p>
                    </div>
                </div>
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">当代</h2>
                    <div class="layui-colla-content">
                        <p>比如贤心</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">科学家</h2>
        <div class="layui-colla-content">
            <p>伟大的科学家</p>
        </div>
    </div>
    <div class="layui-colla-item">
        <h2 class="layui-colla-title">艺术家</h2>
        <div class="layui-colla-content">
            <p>浑身散发着艺术细胞</p>
        </div>
    </div>
</div>

<br>
<p>支持无限嵌套，应用场景非常多！</p>

<script src="/plugin/layui/layui.js" charset="utf-8"></script>
<script src="/js/echart/echarts.js" charset="utf-8"></script>
<script src="/js/jquery/jquery.min.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    var basePath = "";
    layui.use(['element', 'layer','form', 'layedit', 'laydate'], function(){
        var element = layui.element;
        var layer = layui.layer;
        var form = layui.form
            ,layedit = layui.layedit
            ,laydate = layui.laydate;

        //监听折叠
        element.on('collapse(test)', function(data){
            layer.msg('展开状态：'+ data.show);
        });

        //日期
        laydate.render({
            elem: '#date'
        });
    });
    $(document).ready(function(){
        generateChart(basePath,"601038","report_1");
        generateChart(basePath,"600127","report_2");
    })


    function generateChart(basePath,code,reportFormId){
        var optionStr = " option = {\n" +
            "        title: {\n" +
            "            text: '###title###主力资金及价格趋势统计图',\n" +
            "            textStyle: {\n" +
            "                align: 'center',\n" +
            "                color: '#fff',\n" +
            "                fontSize: 20,\n" +
            "            },\n" +
            "            top: '3%',\n" +
            "            left: '10%',\n" +
            "        },\n" +
            "        backgroundColor: '#2F4056',\n" +
            "        grid: {\n" +
            "            top: '25%',\n" +
            "            bottom: '10%'//也可设置left和right设置距离来控制图表的大小\n" +
            "        },\n" +
            "        tooltip: {\n" +
            "            trigger: 'axis',\n" +
            "            axisPointer: {\n" +
            "                type: 'shadow',\n" +
            "                label: {\n" +
            "                    show: true\n" +
            "                }\n" +
            "            }\n" +
            "        },\n" +
            "        legend: {\n" +
            "            data: [ '价格','当日资金','资金汇总'],\n" +
            "            top: '15%',\n" +
            "            textStyle: {\n" +
            "                color: '#ffffff'\n" +
            "            }\n" +
            "        },\n" +
            "        xAxis: {\n" +
            "            data: xData,\n" +
            "        axisLine: {\n" +
            "        show: true, //隐藏X轴轴线\n" +
            "            lineStyle: {\n" +
            "            color: '#01FCE3'\n" +
            "        }\n" +
            "    },\n" +
            "    axisTick: {\n" +
            "        show: true //隐藏X轴刻度\n" +
            "    },\n" +
            "    axisLabel: {\n" +
            "        show: true,\n" +
            "            textStyle: {\n" +
            "            color: '#ebf8ac' //X轴文字颜色\n" +
            "        }\n" +
            "    }\n" +
            "\n" +
            "    },\n" +
            "    yAxis: [{\n" +
            "        type: 'value',\n" +
            "        name: '元',\n" +
            "        nameTextStyle: {\n" +
            "            color: '#ebf8ac'\n" +
            "        },\n" +
            "        splitLine: {\n" +
            "            show: false\n" +
            "        },\n" +
            "        axisTick: {\n" +
            "            show: true\n" +
            "        },\n" +
            "        axisLine: {\n" +
            "            show: true,\n" +
            "            lineStyle: {\n" +
            "                color: '#FFFFFF'\n" +
            "            }\n" +
            "        },\n" +
            "        axisLabel: {\n" +
            "            show: true,\n" +
            "            textStyle: {\n" +
            "                color: '#ebf8ac'\n" +
            "            }\n" +
            "        },\n" +
            "\n" +
            "    },\n" +
            "        {\n" +
            "            type: 'value',\n" +
            "            name: '万元',\n" +
            "            nameTextStyle: {\n" +
            "                color: '#ebf8ac'\n" +
            "            },\n" +
            "            position: 'right',\n" +
            "            splitLine: {\n" +
            "                show: false\n" +
            "            },\n" +
            "            axisTick: {\n" +
            "                show: false\n" +
            "            },\n" +
            "            axisLine: {\n" +
            "                show: true,\n" +
            "                lineStyle: {\n" +
            "                    color: '#FFFFFF'\n" +
            "                }\n" +
            "            },\n" +
            "            axisLabel: {\n" +
            "                show: true,\n" +
            "                formatter: '{value} ', //右侧Y轴文字显示\n" +
            "                textStyle: {\n" +
            "                    color: '#ebf8ac'\n" +
            "                }\n" +
            "            }\n" +
            "        }\n" +
            "    ],\n" +
            "        series: [{\n" +
            "        name: '价格',\n" +
            "        type: 'line',\n" +
            "        yAxisIndex: 1, //使用的 y 轴的 index，在单个图表实例中存在多个 y轴的时候有用\n" +
            "        smooth: true, //平滑曲线显示\n" +
            "        showAllSymbol: true, //显示所有图形。\n" +
            "        symbol: 'circle', //标记的图形为实心圆\n" +
            "        symbolSize: 10, //标记的大小\n" +
            "        itemStyle: {\n" +
            "            //折线拐点标志的样式\n" +
            "            color: '#058cff'\n" +
            "        },\n" +
            "        lineStyle: {\n" +
            "            color: '#058cff'\n" +
            "        },\n" +
            "        areaStyle:{\n" +
            "            color: 'rgba(5,140,255, 0.2)'\n" +
            "        },\n" +
            "        data: priceData\n" +
            "    },\n" +
            "    {\n" +
            "        name: '当日资金',\n" +
            "            type: 'bar',\n" +
            "        yAxisIndex: 0,\n" +
            "        barWidth: 15,\n" +
            "        itemStyle: {\n" +
            "        normal: {\n" +
            "            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n" +
            "                offset: 0,\n" +
            "                color: '#00FFE3'\n" +
            "            },\n" +
            "                {\n" +
            "                    offset: 1,\n" +
            "                    color: '#4693EC'\n" +
            "                }\n" +
            "            ])\n" +
            "        }\n" +
            "    },\n" +
            "        data:amountData\n" +
            "    },\n" +
            "    {\n" +
            "        name: '资金汇总',\n" +
            "            type: 'line',\n" +
            "        yAxisIndex: 0, //使用的 y 轴的 index，在单个图表实例中存在多个 y轴的时候有用\n" +
            "        smooth: true, //平滑曲线显示\n" +
            "        showAllSymbol: true, //显示所有图形。\n" +
            "        symbol: 'circle', //标记的图形为实心圆\n" +
            "        symbolSize: 10, //标记的大小\n" +
            "        itemStyle: {\n" +
            "        //折线拐点标志的样式\n" +
            "        color: '#058cff'\n" +
            "    },\n" +
            "        lineStyle: {\n" +
            "            color: '#00FFE3'\n" +
            "        },\n" +
            "        areaStyle:{\n" +
            "            color: 'rgba(5,140,255, 0.2)'\n" +
            "        },\n" +
            "        data: amountTotalData\n" +
            "    }\n" +
            "    ]\n" +
            "    };";

        var myChart = echarts.init(document.getElementById(reportFormId));
        var po = {};
        po.report_p_code = code;
        $.ajax({
            url: basePath+ '/financial/getStockInfo'+"?time="+(new Date().getTime()),
            type: "post",
            dataType : "json",
            contentType : "application/json",
            data:JSON.stringify(po),
            success: function (o) {
                debugger
                var str = optionStr.replace(/xData/,o.xData);
                var str = str.replace(/priceData/,o.priceData);
                var str = str.replace(/amountData/,o.amountData);
                var str = str.replace(/amountTotalData/,o.amountTotalData);
                var str = str.replace(/###title###/,o.title);
                var option  = eval(" option = "+ str);
                myChart.setOption(option);
            },
            error: function (e) {
                console.log(e);
            }
        });
    }

</script>

</body>
</html>
